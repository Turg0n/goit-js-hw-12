{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\n\nconst myForm = document.querySelector('form');\nconst messageLoad = document.getElementById('searchImageText');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.getElementById('loadMoreButton');\nlet currentPages = 1;\nlet imageArray;\nlet totalHits=0;\nlet inputValue='';\nlet galleryDll;\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    openLightbox();\n});\n\nloadMoreButton.addEventListener('click', e => {\n    const galleryCardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n    currentPages += 1;\n    showHidemessageLoad();\n    getImage(inputValue)\n    .then(posts => {\n    imageArray = posts;\n    if (imageArray.length === 0) {\n        showHidemessageLoad();\n        iziToast.error({\n        message:\n            'There are no images matching your search query. Please try again!',\n        position: 'topRight',\n        });\n        render();\n        loadMoreButton.classList.add('isHidden');\n        } else {\n        showHidemessageLoad();\n        loadMoreButton.classList.remove('isHidden');\n        imageArray.push(...posts);\n        render(true);\n        controlEndsOfImage();\n        \n        galleryDll.refresh();\n        window.scrollBy({\n        top: galleryCardHeight * 2,\n        behavior: 'smooth'\n        });\n    }\n    })\n});\n\nmyForm.addEventListener('submit', e => {\n    e.preventDefault();\n    const searchInput = document.getElementById('searchImage');\n    inputValue = searchInput.value;\n    if (inputValue.trim() === '') {\n    iziToast.info({\n        message: 'Please enter what you want to find!',\n        position: 'topRight',\n    });\n    return;\n    } else {\n    currentPages = 1;\n    showHidemessageLoad();\n    getImage(inputValue)\n        .then(posts => {\n        imageArray = posts;\n        if (imageArray.length === 0) {\n            showHidemessageLoad();\n            iziToast.error({\n            message:\n                'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n            });\n            render();\n            loadMoreButton.classList.add('isHidden');\n        } else if (totalHits <= 15) {\n            showHidemessageLoad();\n            render();\n            loadMoreButton.classList.add('isHidden');\n            galleryDll.refresh();\n            iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n            });\n            return;\n        } else {\n            showHidemessageLoad();\n            loadMoreButton.classList.remove('isHidden');\n            render();\n            galleryDll.refresh();\n        }\n        })\n        .catch(error => {\n        console.log(error);\n        });\n    }\n});\n\nasync function getImage(inputValue) {\n    const API_KEY = '42377778-b3c1271d36d2a7f0c3b2221f8';\n    const URL =\n    'https://pixabay.com/api/?key=' +\n    API_KEY +\n    '&q=' +\n    encodeURIComponent(inputValue) +\n    '&image_type=photo&orientation=horizontal&safe_search=true&page='+currentPages+'&per_page=15&';\n    const response = await axios.get (URL, );\n    totalHits = response.data.totalHits;\n    return response.data.hits;\n}\n\nfunction showHidemessageLoad() {\n    messageLoad.classList.toggle('isHidden');\n}\nfunction productTemplate(item) {\n    return `<div class=\"gallery-item\">\n    <a href=\"${item.largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" loading=\"lazy\" class=\"gallery-image\" />\n    </a>\n    <div class=\"info\">\n        <p class=\"info-item\">\n        <b>Likes:</b> ${item.likes}\n        </p>\n        <p class=\"info-item\">\n        <b>Views:</b> ${item.views}\n        </p>\n        <p class=\"info-item\">\n        <b>Comments:</b> ${item.comments}\n        </p>\n        <p class=\"info-item\">\n        <b>Downloads:</b> ${item.downloads}\n        </p>\n    </div>\n    </div>`;\n}\n\nfunction productListTemplate() {\n    return imageArray.map(productTemplate).join('');\n}\n\nfunction render(addMore = false) {\n    const markup = productListTemplate();\n    if (addMore) {\n    gallery.insertAdjacentHTML('beforeend', markup);\n    } else  {\n    gallery.innerHTML = markup;\n}\n}\nfunction controlEndsOfImage() {\n    if (imageArray.length === totalHits) {\n    loadMoreButton.classList.add('isHidden');\n    iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n    });\n    }\n}\n\nfunction openLightbox() {\n    let options = {\n    captionsData: 'alt',\n    captionDelay: 250,\n    captions: true,\n    };\n    galleryDll = new SimpleLightbox('.gallery a', options);\n    galleryDll.on('show.simplelightbox', function () {});\n    galleryDll.refresh();\n}\n"],"names":["myForm","messageLoad","gallery","loadMoreButton","currentPages","imageArray","totalHits","inputValue","galleryDll","openLightbox","galleryCardHeight","showHidemessageLoad","getImage","posts","iziToast","render","controlEndsOfImage","error","URL","response","axios","productTemplate","item","productListTemplate","addMore","markup","options","SimpleLightbox"],"mappings":"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"}