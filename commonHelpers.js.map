{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\n\nconst myForm = document.querySelector('form');\nconst messageLoad = document.getElementById('searchImageText');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.getElementById('loadMoreButton');\nlet currentPages = 1;\nlet imageArray;\nlet totalHits=0;\nlet inputValue='';\nlet galleryDll;\nconst perPage = 15;\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    openLightbox();\n});\nmyForm.addEventListener('submit', e => {\n    e.preventDefault();\n    const searchInput = document.getElementById('searchImage');\n    inputValue = searchInput.value;\n    if (inputValue.trim() === '') {\n    iziToast.info({\n        message: 'Please enter what you want to find!',\n        position: 'topRight',\n    });\n    return;\n    } else {\n    currentPages = 1;\n    imageArray = [];\n    showHidemessageLoad();\n    getImage(inputValue)\n        .then(posts => {\n        imageArray = posts;\n        if (imageArray.length === 0) {\n            showHidemessageLoad();\n            iziToast.error({\n            message:\n                'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n            });\n            render();\n            loadMoreButton.classList.add('isHidden');\n        } else if (totalHits <= perPage) {\n            showHidemessageLoad();\n            render();\n            loadMoreButton.classList.add('isHidden');\n            galleryDll.refresh();\n            iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n            });\n            return;\n        } else {\n            showHidemessageLoad();\n            loadMoreButton.classList.remove('isHidden');\n            render();\n            galleryDll.refresh();\n        }\n        })\n        .catch(error => {\n        console.log(error);\n        });\n    }\n});\n\nloadMoreButton.addEventListener('click', e => {\n    const galleryCardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n    currentPages += 1;\n    imageArray = [];\n    showHidemessageLoad();\n    getImage(inputValue)\n    .then(posts => {\n        imageArray = posts;\n        if (imageArray.length === 0) {\n            showHidemessageLoad();\n            iziToast.error({\n            message:\n                'There are no images matching your search query. Please try again!',\n            position: 'topRight',\n            });\n        render();\n        loadMoreButton.classList.add('isHidden');\n        } else {\n        showHidemessageLoad();\n        loadMoreButton.classList.remove('isHidden');\n        // imageArray.push(...posts);\n        render(true);\n        controlEndsOfImage();\n        galleryDll.refresh();\n        window.scrollBy({\n        top: galleryCardHeight * 2,\n        behavior: 'smooth'\n        });\n    }\n    })\n});\n\n\n\nasync function getImage(inputValue) {\n    const API_KEY = '42377778-b3c1271d36d2a7f0c3b2221f8';\n    const URL =\n    'https://pixabay.com/api/?key=' +\n    API_KEY +\n    '&q=' +\n    encodeURIComponent(inputValue) +\n    '&image_type=photo&orientation=horizontal&safe_search=true&page='+currentPages+'&per_page='+perPage;\n    const response = await axios.get (URL, );\n    totalHits = response.data.totalHits;\n    return response.data.hits;\n}\n\nfunction showHidemessageLoad() {\n    messageLoad.classList.toggle('isHidden');\n}\nfunction productTemplate(item) {\n    return `<div class=\"gallery-item\">\n    <a href=\"${item.largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" loading=\"lazy\" class=\"gallery-image\" />\n    </a>\n    <div class=\"info\">\n        <p class=\"info-item\">\n        <b>Likes:</b> ${item.likes}\n        </p>\n        <p class=\"info-item\">\n        <b>Views:</b> ${item.views}\n        </p>\n        <p class=\"info-item\">\n        <b>Comments:</b> ${item.comments}\n        </p>\n        <p class=\"info-item\">\n        <b>Downloads:</b> ${item.downloads}\n        </p>\n    </div>\n    </div>`;\n}\n\nfunction productListTemplate() {\n    return imageArray.map(productTemplate).join('');\n}\n\nfunction render(addMore = false) {\n    const markup = productListTemplate();\n    if (addMore) {\n    gallery.insertAdjacentHTML('beforeend', markup);\n    } else  {\n    gallery.innerHTML = markup;\n}\n}\nfunction controlEndsOfImage() {\n    if (imageArray.length === totalHits) {\n    loadMoreButton.classList.add('isHidden');\n    iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n    });\n    }\n}\n\nfunction openLightbox() {\n    let options = {\n        captionsData: 'alt',\n        captionDelay: 250,\n        captions: true,\n        };\n    galleryDll = new SimpleLightbox('.gallery a', options);\n    galleryDll.on('show.simplelightbox', function () {});\n    galleryDll.refresh();\n}\n"],"names":["myForm","messageLoad","gallery","loadMoreButton","currentPages","imageArray","totalHits","inputValue","galleryDll","perPage","openLightbox","iziToast","showHidemessageLoad","getImage","posts","render","error","galleryCardHeight","controlEndsOfImage","URL","response","axios","productTemplate","item","productListTemplate","addMore","markup","options","SimpleLightbox"],"mappings":"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"}